/* ==============================================
   GILPIN DIAMOND DESIGN SYSTEM — Responsive
   Breakpoints: 1024, 768, 480, hover:none,
   safe-area, mobile interaction polish
   ============================================== */

/* ============================================
   MOBILE & TABLET RESPONSIVE DESIGN
   ============================================ */

/* Tablet (768px - 1024px) */
@media (max-width: 1024px) {
    :root {
        --nav-height: 64px;
    }

    .navbar {
        padding: 0 20px;
        height: var(--nav-height);
    }

    .nav-logo-wrapper {
        width: 62px;
        height: 62px;
    }

    .dashboard-view-tabs {
        padding: 8px 16px;
    }

    .view-tab {
        padding: 7px 16px;
        font-size: 11px;
    }
}

/* Mobile tilt-press on action icons */
@media (max-width: 1024px) {
    .navbar [role="button"] {
        transition: transform 0.15s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .navbar [role="button"]:active {
        transform: scale(0.88) rotate(-2deg);
    }

    /* Exclude globe from generic tilt */
    .nav-logo-bubble:active {
        transform: perspective(200px) rotateY(-8deg) rotateX(3deg) scale(0.92) !important;
    }
}

/* Mobile (max-width: 768px) */
@media (max-width: 768px) {
    :root {
        --nav-height: 56px;
    }

    .navbar {
        padding: 0 12px;
        height: var(--nav-height);
        justify-content: space-between;
    }

    .dashboard-view-tabs {
        padding: 6px 6px;
    }

    .view-tab {
        padding: 6px 12px;
        font-size: 11px;
    }

    /* Hide emoji from tab labels on mobile to save space */
    .view-tab .tab-emoji {
        display: none;
    }

    /* Swap full labels for short labels on mobile */
    .tab-label-full {
        display: none !important;
    }

    .tab-label-short {
        display: inline !important;
    }

    .nav-logo-wrapper {
        width: 56px;
        height: 56px;
    }

    .nav-logo-bubble:hover,
    .nav-logo-bubble:active,
    .nav-logo-bubble.touched {
        transform: scale(1.02);
        animation: none;
    }

    .nav-logo-bubble:hover .nav-logo-img,
    .nav-logo-bubble:active .nav-logo-img,
    .nav-logo-bubble.touched .nav-logo-img {
        transform: scale(1.1);
    }

    /* Stage 2: globe tucks up into navbar on scroll (mobile only) */
    .nav-logo-wrapper.globe-tucked {
        transform: translateY(0) !important;
        transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    /* Make dashboard tabs scrollable on mobile */
    .dashboard-tabs {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
    }

    .dashboard-tabs::-webkit-scrollbar {
        display: none;
    }

    /* Stack filter bar vertically on mobile */
    .filter-bar {
        flex-direction: column !important;
        gap: 12px !important;
    }

    /* Larger touch targets (exclude navbar buttons) */
    :not(.navbar)>button,
    .btn,
    [role="button"] {
        min-height: 44px;
        min-width: 44px;
    }

    /* Reset navbar buttons — they have their own sizing */
    .navbar button {
        min-height: auto;
        min-width: auto;
        padding: 0;
    }

    /* Guest row cards on mobile */
    .guest-row {
        display: flex !important;
        flex-direction: column !important;
        padding: 16px !important;
        margin-bottom: 12px;
        border-radius: 12px;
        gap: 12px;
    }

    .guest-row>td,
    .guest-row>div {
        display: block !important;
        width: 100% !important;
    }

    /* Modal full-screen on mobile */
    .modal-content {
        width: 100% !important;
        max-width: 100% !important;
        height: 100vh !important;
        max-height: 100vh !important;
        border-radius: 0 !important;
        margin: 0 !important;
    }

    /* Input fields larger for touch */
    input,
    textarea,
    select {
        font-size: 16px !important;
        /* Prevents zoom on iOS */
        padding: 12px !important;
    }

    /* Hide table headers on mobile, show card labels */
    .mobile-hide {
        display: none !important;
    }

    .mobile-show {
        display: block !important;
    }

    /* Tab navigation on mobile */
    .session-tabs {
        flex-wrap: nowrap !important;
        overflow-x: auto !important;
        -webkit-overflow-scrolling: touch;
        padding-bottom: 4px;
    }
}

/* Small Mobile (max-width: 480px) */
@media (max-width: 480px) {
    :root {
        --nav-height: 50px;
    }

    .navbar {
        padding: 0 8px;
        height: var(--nav-height);
        gap: 4px;
    }

    .dashboard-view-tabs {
        padding: 4px 4px;
    }

    .view-tab {
        padding: 5px 10px;
        font-size: 10px;
        border-radius: 8px;
        letter-spacing: 0.02em;
    }

    .view-tabs-container {
        gap: 4px;
    }

    .nav-logo-wrapper {
        width: 44px;
        height: 44px;
    }

    /* Even larger touch targets (exclude navbar) */
    :not(.navbar)>button,
    .btn {
        min-height: 48px;
        padding: 12px 16px;
    }

    .navbar button {
        min-height: auto;
        min-width: auto;
        padding: 0;
    }

    /* Full-width action buttons */
    .action-buttons {
        flex-direction: column !important;
        width: 100% !important;
    }

    .action-buttons button {
        width: 100% !important;
    }

    /* Smaller text for badges */
    .hl-badge {
        font-size: 9px;
        padding: 2px 6px;
    }

    /* Tighter guest card padding */
    .guest-row {
        padding: 12px !important;
        margin-bottom: 8px;
        gap: 8px;
    }

    /* Tighter guest mobile card padding */
    .guest-mobile-card {
        padding: 12px;
    }
}

/* Ultra-narrow screens (max-width: 400px) */
@media (max-width: 400px) {
    :root {
        --nav-height: 48px;
    }

    .navbar {
        padding: 0 6px;
        gap: 2px;
    }

    .nav-logo-wrapper {
        width: 40px;
        height: 40px;
    }

    .view-tab {
        padding: 4px 8px;
        font-size: 9px;
        border-radius: 7px;
    }

    .view-tabs-container {
        gap: 3px;
    }

    .dashboard-view-tabs {
        padding: 3px 3px;
    }

    /* Even tighter guest cards */
    .guest-mobile-card {
        padding: 10px;
    }

    .guest-row {
        padding: 10px !important;
        gap: 6px;
    }
}

/* Touch-friendly hover states — preserve globe animation */
@media (hover: none) {

    /* Let the .touched class + :active handle globe on tap */
    button:hover {
        opacity: 1;
    }
}

/* ── Premium mobile interaction polish ── */
@media (max-width: 768px) {

    /* Card press feedback */
    .guest-mobile-card:active {
        transform: scale(0.985);
        transition: transform 0.1s ease;
    }

    /* Status button tap feedback — gold ring */
    button:active {
        box-shadow: 0 0 0 3px rgba(197, 160, 101, 0.25);
        transition: box-shadow 0.1s ease;
    }

    /* Smooth input focus glow */
    input:focus,
    textarea:focus,
    select:focus {
        border-color: var(--gilpin-gold) !important;
        box-shadow: 0 0 0 3px rgba(197, 160, 101, 0.15),
            0 2px 8px rgba(197, 160, 101, 0.1) !important;
        transition: all 0.2s ease !important;
    }

    /* Active view-tab gold underline pulse */
    .view-tab.active {
        position: relative;
        overflow: hidden;
    }

    .view-tab.active::before {
        content: '';
        position: absolute;
        bottom: 0;
        left: -100%;
        width: 100%;
        height: 2px;
        background: linear-gradient(90deg, transparent, var(--gilpin-gold), transparent);
        animation: goldShimmerSweep 2.5s linear infinite;
    }

    /* Mobile card glassmorphism lift on scroll */
    .guest-mobile-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    /* Mobile notification toasts — full width at top */
    .notification-toast-container {
        left: 8px;
        right: 8px;
        top: calc(var(--nav-height, 70px) + 8px);
        max-width: none;
    }

    .notification-toast {
        border-radius: 14px;
    }

    /* Mobile navbar padding and globe sizing */
    .navbar {
        padding: 0 12px;
    }

    /* Mobile: reduce heavy backdrop filters during animation */
    .dashboard-view-tabs {
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
    }

    /* Simplified mobile entrance — just fade, no translate */
    .guest-mobile-card {
        animation: none !important;
    }
}

/* Safe area for notched devices — responsive to current breakpoint height */
@supports (padding-top: env(safe-area-inset-top)) {
    .navbar {
        padding-top: env(safe-area-inset-top);
    }

    @media (min-width: 769px) {
        .navbar {
            height: calc(70px + env(safe-area-inset-top));
        }
    }

    @media (max-width: 768px) {
        .navbar {
            height: calc(56px + env(safe-area-inset-top));
        }
    }

    @media (max-width: 480px) {
        .navbar {
            height: calc(50px + env(safe-area-inset-top));
        }
    }
}
